# План тестирования REST API расчёта стоимости продукта

## 1. Цель тестирования
Проверить корректность работы REST API расчёта стоимости продукта включая:
- корректность бизнес-логики расчёта стоимости
- обработку входных параметров
- авторизацию и аутентификацию
- корректность HTTP-кодов и формата ответов

## 2. Объект тестирования
REST API endpoint:

`GET /products/{productId}/cost`

Входные параметры:
- productId - идентификатор продукта
- authToken - токен авторизации (16 символов, буквы и цифры)
- count - количество приобретаемых экземпляров
- start - количество ранее приобретённых экземпляров

## 3. Функциональные требования
- Стоимость продукта рассчитывается по заданной таблице цен.
- Расчёт производится нарастающим итогом с учётом параметров start и count
- При запросе количества более 5 экземпляров стоимость рассчитывается партиями по 5
- При успешном выполнении запрос возвращает HTTP 200 и JSON `{ "cost": number }`
- При отсутствии продукта возвращается HTTP 404.
- При отсутствии или некорректном authToken возвращается HTTP 401.
- При внутренней ошибке возвращается HTTP 500 с телом `{ "errorMessage": }`

## 4. Области тестирования

### 4.1 Функциональное тестирование
- Проверка корректности расчёта стоимости при различных значениях start и count
- Проверка расчёта при покупке партий более 5 экземпляров
- Проверка расчёта на граничных значениях параметров

### 4.2 Тестирование авторизации
- Проверка корректного токена авторизации
- Проверка реакции сервиса на отсутствующий и некорректный токен

### 4.3 Валидация входных параметров
- Проверка обязательности параметров
- Проверка корректности типов данных
- Проверка некорректных и граничных значений

### 4.4 Тестирование обработки ошибок
- Проверка ответа при несуществующем продукте
- Проверка корректности обработки внутренних ошибок
- Проверка соответствия HTTP-кодов спецификации

## 5. Типы тестирования
- Функциональное тестирование
- Негативное тестирование
- Тестирование граничных значений
- Контрактное тестирование API

## 6. Критерии входа
- API доступен на тестовом окружении
- Известны правила расчёта стоимости
- Подготовлены валидные и невалидные тестовые данные

## 7. Критерии выхода
- Все запланированные проверки выполнены
- Критических дефектов не выявлено или они зафиксированы
- Поведение API соответствует заявленным требованиям


## 8. Риски и допущения
- Возможна неоднозначная трактовка правила партиями по 5
- Не определено поведение API при некорректных параметрах (400 и 500)
- Не описан формат тела ответа для ошибок 401 и 404
