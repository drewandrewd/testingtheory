# Тестирование REST API</h1>
### Метод GET /products/{productId}/status?authToken=&recalculate=&owner=&region=

### Цели:
Проверить:
- авторизацию по authToken
- обработку productId
- обработку необязательных параметров
- корректность кодов ответов
- корректность тела ответа JSON и допустимых значений

### Входные данные:
- productId (обязательный)
- authToken (обязательный)
- recalculate
- owner
- region

### Выходные данные

**1. При успешном ответе:**

Код: 200

Тело в формате json: { "productStatus": status }

Допустимые значения status:
- 1
- 0

**2. Если продукт не найден**

Код: 404

**3. При неверном или отсутствующем токене**

Код: 401

**4. При ошибке**

Код: 500

Тело в формате json: {"errorMessage": }


### Критерии завершения
- пройдены позитивные, негативные, пограничные тесты по каждому параметру и их независимым комбинациям
- подтверждены коды ошибок и формат сообщений об ошибках

### Инструменты тестирования
- Postman / Insomnia — ручное тестирование REST API
- curl — проверка запросов через командную строку
- Swagger / OpenAPI (при наличии) — анализ спецификации
- Логи приложения — анализ причин ошибок (500)
- База данных (тестовый контур) — проверка изменений статусов продукта

### Вопросы и допущения

- Допустимо ли передавать authToken в открытом виде в URL, учитывая риски утечек?

## Тест кейсы

### 1. Авторизация
**Тест-кейс 1: Валидный authToken и существующий продукт**

Входные данные:
- productId=существующий
- authToken=валидный (16 символов)

Ожидаемый результат:
- Статус: 200
- Тело JSON: { "productStatus": status }

**Тест-кейс 2: authToken отсутствует**

Входные данные:
- productId=существующий

Ожидаемый результат:
- Статус: 401

**Тест-кейс 3: authToken неверной длины**

Входные данные:
- productId=существующий
- authToken < 16 или > 16 символов

Ожидаемый результат:
- Статус: 401

**Тест-кейс 4: authToken содержит недопустимые символы**

Входные данные:
- productId=существующий
- authToken с спецсимволами (например: /*_+-=#$)

Ожидаемый результат:
- Статус: 401

### 2. productId
**Тест-кейс 5: Продукт не найден**

Входные данные:
- productId=несуществующий
- authToken=валидный (16 символов)

Ожидаемый результат:
- Статус: 404

### 3. Необязательные параметры
**Тест-кейс 6: Все необязательные параметры отсутствуют**

Входные данные:
- productId=существующий
- authToken=валидный

Ожидаемый результат:
- Статус: 200

**Тест-кейс 7: Параметр recalculate=true**

Входные данные:
- productId=существующий
- authToken=валидный
- recalculate=true

Ожидаемый результат:
- Статус: 200

**Тест-кейс 8: Параметр recalculate=false**

Входные данные:
- productId=существующий
- authToken=валидный
- recalculate=false

Ожидаемый результат:
- Статус: 200


**Тест-кейс 9: Параметр owner=Создатель**

Входные данные:
- productId=существующий
- authToken=валидный
- owner=Создатель

Ожидаемый результат:
- Статус: 200

**Тест-кейс 10: Параметр owner=Пользователь**

Входные данные:
- productId=существующий
- authToken=валидный
- owner=Пользователь

Ожидаемый результат:
- Статус: 200

**Тест-кейс 11: Параметр region=валидное значение**

Входные данные:
- productId=существующий
- authToken=валидный
- region=Северо-Запад / Сибирь / Поволжье

Ожидаемый результат:
- Статус: 200

**Тест-кейс 12: Все необязательные параметры заданы**

Входные данные:
- productId=существующий
- authToken=валидный
- recalculate=false
- owner=Пользователь
- region=Сибирь

Ожидаемый результат:
- Статус: 200

### 4. Невалидные значения параметров
**Тест-кейс 13: Невалидное значение recalculate**

Входные данные:
- productId=существующий
- authToken=валидный
- recalculate=abc

Ожидаемый результат:
- Статус: 500
- Тело JSON: { "errorMessage": "<не пусто>" }

**Тест-кейс 14: Невалидное значение owner**

Входные данные:
- productId=существующий
- authToken=валидный
- owner=Администратор

Ожидаемый результат:
- Статус: 500
- Тело JSON: { "errorMessage": "<не пусто>" }

**Тест-кейс 15: Невалидное значение region**

Входные данные:
- productId=существующий
- authToken=валидный
- region=Урал

Ожидаемый результат:
- Статус: 500
- Тело JSON: { "errorMessage": "<не пусто>" }


### 5. Обработка ошибок

**Тест-кейс 16: Внутренняя ошибка сервера**

Предусловие:
- Ошибка на стороне сервиса (БД недоступна и тд)

Ожидаемый результат:
- Статус: 500
- Тело JSON: { "errorMessage": "ошибка" }

### 6.Проверка безопасности
**Тест-кейс 17: Попытка SQL-инъекции в productId**

Входные данные:
- productId=SQL-инъекция
- authToken=валидный

Ожидаемый результат:
- Статус: 400 или 404
- Ошибка сервера (500) отсутствует

**Тест-кейс 18: Попытка SQL-инъекции в параметрах**

Входные данные:
- productId=существующий
- authToken=валидный
- owner=SQL-инъекция

Ожидаемый результат:
- Статус: 400 или 500
- Утечка данных отсутствует